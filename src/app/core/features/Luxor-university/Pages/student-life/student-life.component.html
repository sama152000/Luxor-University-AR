<!-- <app-navbar></app-navbar> -->
<app-page-header></app-page-header>

<div class="student-life-page">
  <!-- التخطيط الرئيسي: شريط جانبي + تفاصيل -->
  <div class="activities-layout" *ngIf="!loading">
    <!-- الشريط الجانبي -->
    <aside class="activities-sidebar">
      <div class="sidebar-header">
        <h3>الأنشطة الطلابية</h3>
      </div>

      <div class="sidebar-list">
        <div
          class="activity-item"
          *ngFor="let activity of filteredActivities"
          [class.active]="selectedActivity?.id === activity.id"
          (click)="selectActivity(activity)"
        >
          <div class="item-image">
            <img [src]="getActivityImage(activity)" [alt]="activity.title" />
          </div>
          <div class="item-info">
            <h4>{{ activity.title }}</h4>
            <p class="category">{{ activity.category.name }}</p>
            <span class="schedule" *ngIf="activity.schedule">
              <i class="pi pi-clock"></i> {{ activity.schedule }}
            </span>
          </div>
          <i class="pi pi-chevron-right indicator"></i>
        </div>
      </div>
    </aside>

    <!-- منطقة التفاصيل -->
    <main class="activity-detail" *ngIf="selectedActivity; else noSelection">
      <button class="back-btn" (click)="selectedActivity = null">
        <i class="pi pi-arrow-left"></i> العودة
      </button>

      <div class="detail-header">
        <img
          [src]="getActivityImage(selectedActivity)"
          [alt]="selectedActivity.title"
          class="detail-image"
        />

        <div class="header-info">
          <span
            class="category-badge"
            [style.background-color]="
              getCategoryColor(selectedActivity.category)
            "
          >
            <i [class]="getCategoryIcon(selectedActivity.category)"></i>
            {{ selectedActivity.category.name }}
          </span>
          <h1>{{ selectedActivity.title }}</h1>
          <p class="description">{{ selectedActivity.description }}</p>
        </div>
      </div>

      <div class="detail-body">
        <!-- بطاقات المعلومات -->
        <div class="info-grid">
          <div class="info-card" *ngIf="selectedActivity.location">
            <i class="pi pi-map-marker"></i>
            <div>
              <strong>المكان</strong>
              <p>{{ selectedActivity.location }}</p>
            </div>
          </div>

          <div class="info-card" *ngIf="selectedActivity.schedule">
            <i class="pi pi-clock"></i>
            <div>
              <strong>المواعيد</strong>
              <p>{{ selectedActivity.schedule }}</p>
            </div>
          </div>

          <div
            class="info-card"
            *ngIf="selectedActivity.contactInfo?.coordinator"
          >
            <i class="pi pi-user"></i>
            <div>
              <strong>المنسق</strong>
              <p>{{ selectedActivity.contactInfo }}</p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- حالة عدم اختيار نشاط -->
    <ng-template #noSelection>
      <main class="no-selection">
        <div class="placeholder">
          <i
            class="pi pi-arrow-right"
            style="font-size: 5rem; color: #cbd5e1"
          ></i>
          <h2>اختر نشاطًا من القائمة</h2>
          <p>اضغط على أي نشاط في الشريط الجانبي لعرض تفاصيله هنا</p>
        </div>
      </main>
    </ng-template>
  </div>

  <!-- قسم التواصل -->
  <section class="contact-section">
    <div class="container">
      <div class="contact-content">
        <h2 class="contact-title"><i class="pi pi-phone"></i> تواصل معنا</h2>
        <p class="contact-text">
          هل أنت جاهز للانضمام إلى الحياة الطلابية النابضة في جامعة الأقصر؟
        </p>
        <button
          pButton
          class="contact-btn pharaonic-btn-primary"
          label="تواصل معنا"
          icon="pi pi-send"
        ></button>
      </div>
    </div>
  </section>
</div>

<!-- <app-footer></app-footer> -->
